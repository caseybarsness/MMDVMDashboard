@using IntelliTect.Coalesce.TypeDefinition
@{
    ViewData["Title"] = "Call Sign";
}
<div class="content" style="margin: 100px; margin-top: 0px">
    <div class="row">
        <div class="col-lg-4">
            <div class="panel panel-green">
                <div class="panel-heading">
                    <h2 data-bind="text: strCallSign"></h2>
                </div>
                <div class="panel-body" style="min-height: 215px;">
                    <h4 data-bind="text: personName"></h4>
                    <b>Class:</b><span data-bind="text: opClass"></span><br />
                    <b>Grant Date:</b><span data-bind="text: grantDate"></span><br />
                    <b>Expiration Date:</b><span data-bind="text: expDate"></span>
                </div>
                <div class="panel-footer">
                    <a data-bind="attr: {href: fccUrl}" target="_blank">FCC ULS Page</a> - <a data-bind="attr: {href: 'https://www.qrz.com/lookup/' + strCallSign}" target="_blank">QRZ</a>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <span class="online fa-map"></span> Map
                </div>
                <div class="panel-body">
                    <div id="map" style="min-height: 250px;"></div>
                </div>
                <div class="panel-footer">
                </div>
            </div>
            <!-- /.col-lg-4 -->
        </div>
    </div>

    <div class="row" data-bind="visible: !isLoadingTransmissions()">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Voice Transmissions
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" data-bind="foreach: servers.items">
                        <!-- ko if: $index() == 0 -->
                        <li class="active">
                            <a data-toggle="tab" aria-expanded="true" data-bind="attr: {href: '#voice-tab-' + serverId()}, text: displayName()"></a>
                            <!-- /ko -->
                            <!-- ko if: $index() != 0 -->
                        <li class="">
                            <a data-toggle="tab" aria-expanded="false" data-bind="attr: {href: '#voice-tab-' + serverId()}, text: displayName()"></a>
                            <!-- /ko -->
                        </li>
                    </ul>

                    <!-- Tab panes -->
                    <div class="tab-content" data-bind="foreach: servers.items">
                        <!-- ko if: $index() == 0 -->
                        <div class="tab-pane fade active in" data-bind="attr: {id: 'voice-tab-' + serverId()}">
                            <br />
                            <table class="table table-striped table-bordered table-hover" width="100%" data-bind="attr: { id: 'transmission-table-' + serverId()}"></table>
                        </div>
                        <!-- /ko -->
                        <!-- ko if: $index() != 0 -->
                        <div class="tab-pane fade" data-bind="attr: {id: 'voice-tab-' + serverId()}">
                            <br />
                            <table class="table table-striped table-bordered table-hover" width="100%" data-bind="attr: { id: 'transmission-table-' + serverId()}"></table>
                        </div>
                        <!-- /ko -->

                    </div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
    </div>
    <div class="row" data-bind="visible: isLoadingTransmissions">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4><img src="~/img/loading.gif" height="40" /> Loading Voice Transmission Details</h4>
                </div>
            </div>
        </div>
    </div>
    <div class="row" data-bind="visible: !isLoadingStreams()">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    AMBE Stream Logs
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <!-- Nav tabs -->
                    <ul class="nav nav-tabs" data-bind="foreach: servers.items">
                        <!-- ko if: $index() == 0 -->
                        <li class="active">
                            <a data-toggle="tab" aria-expanded="true" data-bind="attr: {href: '#stream-tab-' + serverId()}, text: displayName()"></a>
                            <!-- /ko -->
                            <!-- ko if: $index() != 0 -->
                        <li class="">
                            <a data-toggle="tab" aria-expanded="false" data-bind="attr: {href: '#stream-tab-' + serverId()}, text: displayName()"></a>
                            <!-- /ko -->
                        </li>
                    </ul>
                    <!-- Tab panes -->
                    <div class="tab-content" data-bind="foreach: servers.items">
                        <!-- ko if: $index() == 0 -->
                        <div class="tab-pane fade active in" data-bind="attr: {id: 'stream-tab-' + serverId()}">
                            <br />
                            <table class="table table-striped table-bordered table-hover" width="100%" data-bind="attr: { id: 'streams-table-' + serverId()}"></table>
                        </div>
                        <!-- /ko -->
                        <!-- ko if: $index() != 0 -->
                        <div class="tab-pane fade" data-bind="attr: {id: 'stream-tab-' + serverId()}">
                            <br />
                            <table class="table table-striped table-bordered table-hover" width="100%" data-bind="attr: { id: 'streams-table-' + serverId()}"></table>
                        </div>
                        <!-- /ko -->
                    </div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
    </div>
    <div class="row" data-bind="visible: isLoadingStreams">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4><img src="~/img/loading.gif" height="40" /> Loading AMBE Stream Details</h4>
                </div>
            </div>
        </div>
    </div>

    @*<h2>Voice Transmissions</h2>
        <div data-bind="foreach: servers.items">
            <h4 data-bind="text: serverSearchString"></h4>
            <table class="table table-striped table-bordered table-hover" data-bind="attr: { id: 'transmission-table-' + serverId()}"></table>
        </div>
        <h2>AMBE Stream Logs</h2>
        <div data-bind="foreach: servers.items">
            <h4 data-bind="text: serverSearchString"></h4>
            <table class="table table-striped table-bordered table-hover" data-bind="attr: { id: 'streams-table-' + serverId()}"></table>
        </div>
        <br />
        <br />*@
</div>
@section Scripts {

    <script src="~/js/sign.index.js" asp-append-version="true"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-wdUi7Pa5imm5JpEaEbD6dOIOSjd_diY"
            async defer></script>
}
