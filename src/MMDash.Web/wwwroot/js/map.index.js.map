{"version":3,"sources":["map.index.ts"],"names":[],"mappings":"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","file":"map.index.js","sourcesContent":["\r\n/// <reference path=\"viewmodels.generated.d.ts\" />\r\n\r\n\r\nmodule MMDash {\r\n    declare var MarkerClusterer: any;\r\n    export class MapModule {\r\n        public ipList = new ListViewModels.IpLogList();\r\n\r\n        load() {\r\n            var self = this;\r\n            self.ipList.dataSource = new ListViewModels.IpLogDataSources.MappableIps();\r\n            self.ipList.pageSize(1000);\r\n            self.ipList.load(function () {\r\n                var numLat = parseFloat(\"47.079303\");\r\n                var numLong = parseFloat(\" -117.158865\");\r\n                var opts: google.maps.MapOptions = {\r\n                    center: new google.maps.LatLng(numLat, numLong),\r\n                    mapTypeId: google.maps.MapTypeId.TERRAIN,\r\n                    zoom: 5\r\n                };\r\n                var map = new google.maps.Map(document.getElementById(\"map\"), opts);\r\n\r\n                var infoWin = new google.maps.InfoWindow();\r\n                var markers = self.ipList.items().map(function (location, i) {\r\n                    var Lat = parseFloat(location.lat());\r\n                    var Long = parseFloat(location.long());\r\n                    var marker = new google.maps.Marker({\r\n                        position: new google.maps.LatLng(Lat, Long),\r\n                        title: location.callSignString(),\r\n                        animation: google.maps.Animation.DROP\r\n                    });\r\n                    \r\n                    google.maps.event.addListener(marker, 'click', function (evt) {\r\n                        var content = \"\";\r\n                        content += \"<a href='/Sign/?call=\" + location.callSignString() + \"'><b>\" + location.callSignString() + \"</b></a><br />\";\r\n                        content += \"\" + location.ipAddress() + \"<br />\";\r\n                        infoWin.setContent(content);\r\n                        infoWin.open(map, marker);\r\n                    })\r\n                    return marker;\r\n                });\r\n\r\n                var markerCluster = new MarkerClusterer(map, markers,\r\n                    { imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m', maxZoom: 9 });\r\n            });\r\n        }\r\n\r\n        constructor() {\r\n            var self = this;\r\n        }\r\n\r\n    }\r\n\r\n    $(function () {\r\n        var vm = new MapModule();\r\n        ko.applyBindings(vm);\r\n        vm.load();\r\n    })\r\n\r\n}"]}